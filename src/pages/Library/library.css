.modals > div {
  display: flex;
  flex-direction: column;
  padding: 2rem;
  width: 100%;
  gap: 1rem;
}

/* Constrain landing content so it doesn't flow under fixed left panel */
.library-landing {
  margin-left: max(200px, 12.5%);
  width: calc(100vw - max(200px, 12.5%) - 3rem);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Hero banner */
.library-hero {
  background: linear-gradient(90deg, #4f46e5, #9333ea);
  color: #ffffff;
  border-radius: 16px;
  padding: 24px 28px;
}
.library-hero h1 {
  margin: 0 0 8px 0;
  font-size: 2rem;
}
.library-hero p {
  margin: 0;
  opacity: 0.9;
}

/* Stat cards */
.library-stats {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}
.stat-card {
  display: flex;
  align-items: center;
  gap: 12px;
  background: #0f1224 !important;
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: #e5e7eb;
  padding: 16px;
  border-radius: 12px;
}
.stat-card svg { color: #a78bfa; }
.stat-text { display: flex; flex-direction: column; }
.stat-number { font-weight: 700; font-size: 1.25rem; color: #ffffff; }
.stat-label { font-size: 0.85rem; opacity: 0.8; }

/* Category cards */
.library-categories {
  display: grid;
  /* Max 3 columns, but auto-fit down to 2 or 1 and expand cards to fill row */
  grid-template-columns: repeat(auto-fit, minmax(max(280px, calc(100%/4)), 1fr));
  gap: 16px;
}
.category-spotlight {
  background: #0b0f1a;
  padding: 0 !important;
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: none !important;
  min-height: unset !important;
  min-width: unset !important;
  height: 100%;
}

.category-spotlight:hover {
  background: #0b0f1a;
}

.category-card {
  display: grid;
  grid-template-columns: 56px 1fr 24px;
  align-items: center;
  gap: 12px;
  color: #e5e7eb;
  padding: 16px;
  border-radius: 12px;
  text-decoration: none;
  transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
}

.category-card:hover {
  transform: translateY(-2px);
  border-color: rgba(167, 139, 250, 0.45);
}

.category-icon { display: flex; align-items: center; justify-content: center; color: #a78bfa; }
.category-content h3 { margin: 0 0 4px 0; color: #ffffff; font-size: 1rem; }
.category-content p { margin: 0; font-size: 0.9rem; opacity: 0.85; }
.category-meta { margin-top: 6px; display: inline-block; font-size: 0.8rem; opacity: 0.75; }
.category-arrow { color: #667085; font-size: 20px; }

/* Recent activity */
.recent-activity {
  background: #0b0f1a;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
  padding: 16px;
}
.recent-activity h3 { margin: 0 0 12px 0; color: #ffffff; }
.recent-activity ul { list-style: none; padding: 0; margin: 0; display: grid; gap: 10px; }
.recent-activity li { display: grid; grid-template-columns: 10px 1fr auto; align-items: center; gap: 12px; color: #e5e7eb; }
.recent-activity .dot { width: 8px; height: 8px; border-radius: 50%; background: #8b5cf6; display: inline-block; }
.recent-activity .activity-text { font-size: 0.95rem; }
.recent-activity .time { font-size: 0.8rem; opacity: 0.7; }

@media (max-width: 1100px) {
  .library-stats { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .library-categories { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 700px) {
  .library-stats, .library-categories { grid-template-columns: 1fr; }
}

/* Articles view */
.article-cards { display: flex; flex-direction: column; gap: 1rem; }
.article-featured-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; }
.article-card-link { display: block;}
.article-card-link:hover .featured-tags-outside { transform: translateY(calc(-50% - 2px)) }
.article-card-link:hover .row-tags-outside { transform: translateY(calc(-50% - 2px)); }
.article-spotlight { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.08); box-shadow: none; min-height: unset !important; justify-content: left !important; align-items: start !important; }
.article-spotlight:hover { background: #0b0f1a; }
.article-featured-card { color: #e5e7eb; padding: 16px; border-radius: 12px; text-decoration: none; display: flex; flex-direction: column; gap: 8px; }
.article-featured-card h3 { margin: 0; color: #fff; text-align: left; }
.article-featured-card .desc { margin: 0; opacity: 0.85; text-align: left; }
.article-featured-card .meta { display: flex; justify-content: space-between; opacity: 0.75; font-size: 0.85rem; }
.article-featured-card .tags { display: flex; gap: 6px; }
.featured-tags-outside { transition: transform 0.3s ease; display: flex; gap: 6px; margin-top: 6px; padding-left: 8px; transform: translateY(-50%); }
.tag { background: #1f2937; color: #c7d2fe; padding: 2px 6px; border-radius: 12px; font-size: 0.75rem; }
.tag-sm { font-size: 0.7rem; opacity: 0.9; }
.bottom-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 6px; }

.article-list { display: flex; flex-direction: column; }
.article-row { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 12px; color: #e5e7eb; padding: 14px; border-radius: 10px; text-decoration: none; overflow: hidden; }
.article-row .row-left { display: flex; align-items: center; gap: 10px; }
.article-row .pill { background: #1f2937; color: #c7d2fe; padding: 2px 8px; border-radius: 999px; font-size: 0.75rem; }
.article-row .title { color: #fff; font-weight: 600; margin-bottom: 5px; }
.article-row .row-right { display: flex; gap: 12px; opacity: 0.75; font-size: 0.85rem; }
.row-tags-outside { transition: transform 0.3s ease; display: flex; gap: 6px; margin: 6px 0 0 8px; flex-wrap: wrap; transform: translateY(-50%); }
.muted { color: #cbd5e1; opacity: 0.85; }

@media (max-width: 1100px) {
  .article-featured-grid { grid-template-columns: 1fr; }
}

.pagination { display: flex; gap: 8px; align-items: center; justify-content: center; margin-top: 8px; }
.page-btn { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.1); color: #e5e7eb; padding: 6px 10px; border-radius: 8px; cursor: pointer; }
.page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.page-btn.active { background: #1f2937; border-color: #6366f1; }

/* Research grid */
.research-list { display: flex; flex-direction: column; gap: 1rem; }
.research-grid { display: grid; grid-template-columns: 1fr; gap: 14px; }
.empty-state { color: #9ca3af; font-style: italic; padding: 8px 0; }
.loading-state { color: #9ca3af; font-style: italic; padding: 8px 0; }
.research-card { width: 100%; color: #e5e7eb; padding: 16px; border-radius: 12px; }
.research-spotlight > .spotlight-card-content {
  display: flex;
  flex-direction: row;
  gap: 1rem;
  width: 100%;
  cursor: default;
}
.research-spotlight { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.08); box-shadow: none; }
.research-spotlight:hover { background: #0b0f1a; }
.spotlight-card::before { background: none !important; }
.research-card .card-top { display: grid; grid-template-columns: 160px 1fr auto; gap: 16px; align-items: start; }
.research-card .thumb { width: 160px; height: 120px; object-fit: cover; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: #0f172a; }

/* Workshops page */
.workshops { display: flex; flex-direction: column; gap: 18px; }
.workshops-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
.ws-stat { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 12px; text-align: center; color: #e5e7eb; }
.ws-stat-number { font-weight: 700; font-size: 1.2rem; color: #a78bfa; }
.ws-stat-label { opacity: 0.8; font-size: 0.85rem; }
.workshops-list { display: flex; flex-direction: column; gap: 16px; }
.workshop-spotlight { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.08); box-shadow: none; }
.workshop-spotlight:hover { background: #0b0f1a; }
.workshop-spotlight > .spotlight-card-content {
  display: flex;
  width: 97.5%;
  cursor: default;
}
.workshop-card { width: 100%; display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: center; border-radius: 12px; padding: 14px; color: #e5e7eb; }
.ws-left { display: flex; flex-direction: column; gap: 8px; }
.ws-title-row { display: flex; align-items: center; gap: 10px; }
.triangle { width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #9ca3af; background: transparent; padding: 0; outline: none; border-radius: 0; }
.ws-title { margin: 0; font-weight: 600; color: #fff; }
.ws-summary { margin: 0; color: #cbd5e1; text-align: left; }
.ws-meta { display: flex; gap: 14px; align-items: center; opacity: 0.85; font-size: 0.9rem; }
.ws-meta-item { display: inline-flex; align-items: center; gap: 6px; }
.ws-tags { display: flex; gap: 8px; flex-wrap: wrap; }
.chip { background: #1f2937; color: #e5e7eb; padding: 2px 10px; border-radius: 999px; font-size: 0.75rem; }
.chip.small { opacity: 0.9; }
.chip.in-progress { background: #1f2937; color: #93c5fd; }
.chip.success { background: #1f2937; color: #86efac; }
.chip.muted { background: #111827; color: #cbd5e1; }
.chip.beginner { color: #86efac; }
.chip.intermediate { color: #fde68a; }
.chip.advanced { color: #fca5a5; }
.ws-progress { display: grid; grid-template-columns: 1fr; gap: 8px; align-items: center; }
.ws-progress .bar { position: relative; height: 10px; background: #0f172a; border-radius: 999px; border: 1px solid rgba(255,255,255,0.06); overflow: visible; }
.ws-progress .bar.complete { border-color: rgba(16, 185, 129, 0.35); }
.ws-progress .bar .fill { position: absolute; top: 0; left: 0; height: 100%; background: linear-gradient(90deg, #6366f1, #a78bfa); border-radius: 999px; z-index: 1; }
.ws-progress .bar .fill.complete { background: linear-gradient(90deg, #059669, #34d399); }
.ws-progress .bar .bubble { position: absolute; top: 50%; transform: translate(-50%, -50%); width: 12px; height: 12px; border-radius: 50%; background: #111827; border: 2px solid #374151; z-index: 2; pointer-events: none; }
.ws-progress .bar .bubble.active { background: #a78bfa; border-color: #a78bfa; box-shadow: 0 0 0 2px rgba(167, 139, 250, 0.2); }
.ws-progress .bar.complete .bubble.active { background: #34d399; border-color: #059669; box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.25); }
.ws-right { display: flex; align-items: center; gap: 12px; }
.ws-thumb { width: 160px; height: 100px; object-fit: cover; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: #0f172a; }
.ws-actions { display: flex; flex-direction: column; gap: 8px; }
.btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.12); background: #0b0f1a; color: #e5e7eb; cursor: pointer; }
.btn.primary { background: #4f46e5; border-color: #4f46e5; }
.btn.secondary { background: #1f2937; }
.btn.success { background: #065f46; border-color: #065f46; }
.btn.ghost { background: transparent; }

@media (max-width: 1100px) {
  .workshop-card { grid-template-columns: 1fr; }
  .ws-right { justify-content: space-between; }
}

/* Videos page */
.videos { display: flex; flex-direction: column; gap: 14px; }
.video-filters { display: flex; flex-direction: row; gap: 8px; margin-top: 4px; width: 100%; }
.filter-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; width: 100%; flex-direction: row !important; }
.filter-label { color: #e5e7eb; opacity: 0.85; margin-right: 4px; }
.chip-filter { background: #0b0f1a; color: #e5e7eb; border: 1px solid rgba(255,255,255,0.1); padding: 6px 10px; border-radius: 999px; cursor: pointer; }
.chip-filter.active { background: #1f2937; border-color: #6366f1; }
.video-grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 16px; }
.video-spotlight { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.08); box-shadow: none; justify-content: left !important; }
.video-spotlight:hover { background: #0b0f1a; }
.video-card { color: #e5e7eb; border-radius: 12px; overflow: hidden; cursor: pointer; display: flex; flex-direction: column; }
.video-card .thumb-wrap { position: relative; height: 256px; background: #0f172a; }
.video-card .thumb { width: 100%; height: 100%; object-fit: cover; }
.video-card .duration { position: absolute; right: 8px; bottom: 8px; background: rgba(0,0,0,0.7); padding: 2px 6px; border-radius: 6px; display: inline-flex; gap: 4px; align-items: center; font-size: 0.75rem; }
.video-body { display: flex; flex-direction: column; gap: 6px; padding: 12px; }
.badge-row { display: flex; gap: 6px; }
.badge { background: #111827; color: #cbd5e1; padding: 2px 8px; border-radius: 999px; font-size: 0.75rem; }
.badge.level { color: #86efac; }
.video-body .title { color: #fff; font-weight: 600; text-align: left; }
.video-body .desc { color: #cbd5e1; font-size: 0.92rem; text-align: left; }
.meta-row { display: flex; gap: 12px; align-items: center; font-size: 0.85rem; }
.meta-row.end { justify-content: flex-end; }

@media (max-width: 1200px) { .video-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (max-width: 800px) { .video-grid { grid-template-columns: 1fr; } }

/* Competitions */
.competitions { display: flex; flex-direction: column; gap: 14px; }
.competition-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 18px; }
.competition-spotlight { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.1); box-shadow: none; }
.competition-spotlight:hover { background: #0b0f1a; }
.competition-spotlight > .spotlight-card-content {
  cursor: default;
}
.comp-card { position: relative; color: #e5e7eb; border-radius: 12px; overflow: hidden; }
.comp-thumb { position: absolute; right: 12px; bottom: 12px; max-width: 160px; max-height: 110px; width: auto; height: auto; object-fit: contain; border-radius: 8px; opacity: 0.9; border: 1px solid rgba(255,255,255,0.08); }
.comp-header { display: flex; align-items: center; gap: 10px; padding: 12px 12px 0 12px; }
.comp-icon { display: inline-flex; width: 28px; height: 28px; align-items: center; justify-content: center; border-radius: 8px; background: #111827; color: #a78bfa; }
.comp-title { font-weight: 700; color: #fff; flex: 1; text-align: left; }
.status { background: #111827; border: 1px solid rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 999px; font-size: 0.75rem; }
.comp-body { padding: 10px 12px 14px 12px; padding-right: 170px; display: flex; flex-direction: column; gap: 8px; text-align: left; }
.badges { display: flex; gap: 8px; }
.badges .badge { background: #111827; color: #cbd5e1; padding: 2px 8px; border-radius: 999px; font-size: 0.75rem; }
.summary { margin: 0; color: #cbd5e1; }
.meta-row { display: flex; gap: 14px; align-items: center; font-size: 0.9rem; }
.links-row { display: flex; gap: 10px; align-items: center; }
.purple-link { color: #a78bfa; text-decoration: none; display: inline-flex; align-items: center; gap: 6px; }
.competitions .btn { background: #1f2937; border: 1px solid rgba(255,255,255,0.12); color: #e5e7eb; padding: 6px 10px; border-radius: 8px; cursor: pointer; }

@media (max-width: 1100px) { .competition-grid { grid-template-columns: 1fr; } }
.research-card .badges { display: flex; gap: 8px; align-items: center; margin-bottom: 6px; }
.research-card .badge { background: #1f2937; color: #93c5fd; padding: 2px 8px; border-radius: 999px; font-size: 0.7rem; }
.research-card .badge.blue { color: #bfdbfe; }
.research-card .card-title { margin: 8px 0 6px 0; color: #fff; text-align: left; }
.research-card .card-desc { margin: 0 0 8px 0; opacity: 0.85; text-align: left; }
.research-card .skills { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 6px; }
.research-card .skill-pill { background: #111827; color: #c7d2fe; border: 1px solid rgba(255,255,255,0.08); padding: 2px 8px; border-radius: 999px; font-size: 0.75rem; }
.research-card .stats-row { display: flex; gap: 14px; font-size: 0.85rem; opacity: 0.75; margin-top: 6px; }
.research-card .team-row { display: flex; gap: 8px; align-items: center; margin-top: 8px; }
.research-card .team-label { opacity: 0.75; }
.research-card .avatars { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; }
.research-card .avatar { width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 700; border-radius: 999px; background: #111827; border: 1px solid rgba(255,255,255,0.12); color: #e5e7eb; }
.research-card .avatar.overflow { background: #1f2937; color: #93c5fd; }
.research-card .progress { display: flex; flex-direction: column; gap: 6px; align-items: flex-end; }
.research-card .progress .label { opacity: 0.8; font-size: 0.85rem; }
.research-card .progress .bar { width: 140px; height: 6px; background: #111827; border-radius: 999px; overflow: hidden; border: 1px solid rgba(255,255,255,0.08); }
.research-card .progress .fill { height: 100%; background: #3b82f6; }
.research-card .card-footer { display: flex; gap: 10px; align-items: center; margin-top: 8px; justify-content: flex-end; }
.research-card .ext-links { display: inline-flex; gap: 8px; }
.research-card .ext-btn { display: inline-flex; gap: 6px; align-items: center; text-decoration: none; color: #e5e7eb; background:#0f172a; border:1px solid rgba(255,255,255,0.12); padding:4px 10px; border-radius:8px; }
.research-card .ext-btn:hover { border-color:#93c5fd; color:#93c5fd; }

@media (min-width: 1100px) {
  .research-grid { grid-template-columns: 1fr; }
}

/* Year filter chips */
.year-filter { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px; }
.year-chip { background: #0b0f1a; border: 1px solid rgba(255,255,255,0.14); color: #e5e7eb; padding: 6px 10px; border-radius: 999px; cursor: pointer; }
.year-chip.active { background: #1f2937; border-color: #6366f1; color: #fff; }
.filter-row { display: flex; flex-direction: column; align-items: stretch; gap: 12px; }
.search-input { width: 100%; flex: 0 0 100%; max-width: none; background: #0b0f1a; color: #e5e7eb; border: 1px solid rgba(255,255,255,0.14); border-radius: 8px; padding: 10px 12px; box-sizing: border-box; }